# Integration Test Workflow
# Runs integration tests by patching component into test targets
#
# Default test targets: axvisor, starry
# Inputs:
#   crate_name: Component crate name (required, auto-detected if empty)
#   test_targets: Test targets to run (comma-separated or "all")

name: Test

on:
  workflow_call:
    inputs:
      crate_name:
        description: 'Component crate name (auto-detected from Cargo.toml if empty)'
        required: false
        default: ''
        type: string
      test_targets:
        description: 'Test targets (comma-separated or "all")'
        required: false
        default: 'all'
        type: string

jobs:
  axvisor-qemu:
    name: Axvisor (QEMU)
    uses: ./.github/workflows/axvisor/test-qemu.yml

  axvisor-board:
    name: Axvisor (Board)
    uses: ./.github/workflows/axvisor/test-board.yml

  starry:
    name: Starry
    uses: ./.github/workflows/starry/test.yml
